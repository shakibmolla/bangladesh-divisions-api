const express = require("express");
const app = express();
const port = 3000;

// বাংলাদেশের বিভাগ ও জেলা ডেটা
const data = [
  {
    division: "ঢাকা",
    districts: [
      "ঢাকা",
      "গাজীপুর",
      "কিশোরগঞ্জ",
      "মানিকগঞ্জ",
      "মুনশীগঞ্জ",
      "নারায়ণগঞ্জ",
      "নরসিংদী",
      "রাজবাড়ী",
      "শরীয়তপুর",
      "টাঙ্গাইল",
      "ফরিদপুর",
      "গোপালগঞ্জ",
      "মাদারীপুর",
    ],
  },
  {
    division: "চট্টগ্রাম",
    districts: [
      "চট্টগ্রাম",
      "কক্সবাজার",
      "বান্দরবান",
      "খাগড়াছড়ি",
      "রাঙামাটি",
      "ব্রাহ্মণবাড়িয়া",
      "চাঁদপুর",
      "কুমিল্লা",
      "ফেনী",
      "লক্ষ্মীপুর",
      "নোয়াখালী",
    ],
  },
  {
    division: "রাজশাহী",
    districts: [
      "রাজশাহী",
      "চাঁপাইনবাবগঞ্জ",
      "নাটোর",
      "নওগাঁ",
      "পাবনা",
      "বগুড়া",
      "জয়পুরহাট",
      "সিরাজগঞ্জ",
    ],
  },
  {
    division: "খুলনা",
    districts: [
      "খুলনা",
      "বাগেরহাট",
      "সাতক্ষীরা",
      "যশোর",
      "নড়াইল",
      "ঝিনাইদহ",
      "মাগুরা",
      "কুষ্টিয়া",
      "মেহেরপুর",
      "চুয়াডাঙ্গা",
    ],
  },
  {
    division: "বরিশাল",
    districts: [
      "বরিশাল",
      "পটুয়াখালী",
      "ভোলা",
      "ঝালকাঠি",
      "পিরোজপুর",
      "বরগুনা",
    ],
  },
  {
    division: "সিলেট",
    districts: ["সিলেট", "মৌলভীবাজার", "হবিগঞ্জ", "সুনামগঞ্জ"],
  },
  {
    division: "রংপুর",
    districts: [
      "রংপুর",
      "দিনাজপুর",
      "গাইবান্ধা",
      "কুড়িগ্রাম",
      "লালমনিরহাট",
      "নীলফামারী",
      "ঠাকুরগাঁও",
      "পঞ্চগড়",
    ],
  },
  {
    division: "ময়মনসিংহ",
    districts: ["ময়মনসিংহ", "নেত্রকোনা", "জামালপুর", "শেরপুর"],
  },
];

// API Route - সব বিভাগ ও জেলা দেখাবে
app.get("/api/divisions", (req, res) => {
  res.json(data);
});

// নির্দিষ্ট বিভাগের জেলা দেখতে
app.get("/api/divisions/:divisionName", (req, res) => {
  const divisionName = req.params.divisionName;
  const division = data.find((d) => d.division === divisionName);

  if (division) {
    res.json(division);
  } else {
    res.status(404).json({ message: "বিভাগ খুঁজে পাওয়া যায়নি!" });
  }
});

// সার্ভার চালু
app.listen(port, () => {
  console.log(`✅ API চালু হয়েছে: http://localhost:${port}`);
});
